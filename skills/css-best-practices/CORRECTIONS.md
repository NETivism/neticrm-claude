# netiCRM CSS Skill ä¿®æ­£èªªæ˜

## ä¿®æ­£æ¦‚è¦

æ ¹æ“š netiCRM å°ˆæ¡ˆçš„å¯¦éš›éœ€æ±‚ï¼Œé‡å° `.crm-container` è¦ç¯„é€²è¡Œäº†é‡è¦ä¿®æ­£ã€‚

## ğŸ”´ é—œéµä¿®æ­£

### 1. body/html é¸æ“‡å™¨è¦ç¯„

**éŒ¯èª¤ç†è§£**ï¼ˆä¿®æ­£å‰ï¼‰:
```css
/* âŒ ä¹‹å‰èªç‚ºé€™æ¨£å¯ä»¥ */
body {
  font-family: sans-serif;
}
```
ç†ç”±ï¼šèªç‚º body æ˜¯å…¨åŸŸå…ƒç´ ï¼Œåœ¨ `.crm-container` å¤–ï¼Œæ‰€ä»¥ä¸éœ€è¦å‰ç¶´ã€‚

**æ­£ç¢ºç†è§£**ï¼ˆä¿®æ­£å¾Œï¼‰:
```css
/* âœ… æ­£ç¢ºæ–¹æ³• 1: ä½¿ç”¨ :has() ç¢ºä¿åªå½±éŸ¿æœ‰ CRM çš„é é¢ */
body:has(.crm-container) {
  font-family: sans-serif;
}

/* âœ… æ­£ç¢ºæ–¹æ³• 2: åœ¨ .crm-container å…§è¨­å®š */
.crm-container {
  font-family: sans-serif;
}
```

**ç‚ºä»€éº¼è¦ä¿®æ­£ï¼Ÿ**
- CiviCRM å¸¸åµŒå…¥åœ¨å…¶ä»–ç¶²ç«™ä¸­ï¼ˆWordPressã€Drupal ç­‰ï¼‰
- ç›´æ¥å¯« `body { }` æœƒå½±éŸ¿**å®¿ä¸»ç¶²ç«™çš„æ‰€æœ‰é é¢**ï¼Œé€ æˆæ¨£å¼æ±¡æŸ“
- å¿…é ˆä½¿ç”¨ `body:has(.crm-container)` ç¢ºä¿åªåœ¨æœ‰ CRM å…§å®¹çš„é é¢æ‰å¥—ç”¨

### 2. :root ä¸­çš„ CSS Variables

**éŒ¯èª¤ç†è§£**ï¼ˆä¿®æ­£å‰ï¼‰:
```css
/* âŒ ä¹‹å‰èªç‚ºé€™æ¨£å¯ä»¥ */
:root {
  --crm-color-primary: #0073aa;
}
```

**æ­£ç¢ºç†è§£**ï¼ˆä¿®æ­£å¾Œï¼‰:
```css
/* âœ… å®šç¾©åœ¨ .crm-container å…§ */
.crm-container {
  --crm-color-primary: #0073aa;
}

/* âœ… æˆ–ä½¿ç”¨ :has() */
:root:has(.crm-container) {
  --crm-color-primary: #0073aa;
}
```

**ç‚ºä»€éº¼è¦ä¿®æ­£ï¼Ÿ**
- `:root` æ˜¯å…¨åŸŸä½œç”¨åŸŸï¼Œæœƒæ±¡æŸ“æ•´å€‹ç¶²ç«™çš„å‘½åç©ºé–“
- `--crm-*` è®Šæ•¸æ‡‰è©²åªåœ¨ CRM å…§éƒ¨ä½¿ç”¨
- å®šç¾©åœ¨ `.crm-container` å…§å¯ä»¥ç¢ºä¿éš”é›¢æ€§

### 3. å®¹å™¨å¤–å…ƒç´ çš„åš´æ ¼ç¢ºèª

**éŒ¯èª¤ç†è§£**ï¼ˆä¿®æ­£å‰ï¼‰:
åˆ—å‡ºå¾ˆå¤š"å¯èƒ½"åœ¨å®¹å™¨å¤–çš„å…ƒç´ ï¼š
- `.crm-header-wrapper` - é€šå¸¸åœ¨å®¹å™¨å¤–
- `.crm-status-message` - å¯èƒ½åœ¨å®¹å™¨å¤–

**æ­£ç¢ºç†è§£**ï¼ˆä¿®æ­£å¾Œï¼‰:
åªåˆ—å‡º**ç¢ºèª**åœ¨å®¹å™¨å¤–çš„å…ƒç´ ï¼š
- `#civicrm-menu` - CiviCRM é ‚éƒ¨é¸å–®ï¼ˆç¢ºèªåœ¨å®¹å™¨å¤–ï¼‰
- `.crm-notify-container` - é€šçŸ¥å®¹å™¨ï¼ˆç¢ºèªåœ¨å®¹å™¨å¤–ï¼‰

**ç‚ºä»€éº¼è¦ä¿®æ­£ï¼Ÿ**
- ä½¿ç”¨ã€Œå¯èƒ½ã€ã€ã€Œé€šå¸¸ã€é€™é¡ä¸ç¢ºå®šçš„è©å®¹æ˜“èª¤å°
- å¿…é ˆæª¢æŸ¥å¯¦éš› HTML çµæ§‹æ‰èƒ½ç¢ºèª
- å¦‚æœä¸ç¢ºå®šï¼Œ**ä¸€å¾‹åŠ ä¸Š `.crm-container` å‰ç¶´**

## ğŸ“ æª”æ¡ˆä¿®æ­£æ¸…å–®

### SKILL.md
- âœ… ä¿®æ­£ã€Œä¾‹å¤–æƒ…æ³ã€ç« ç¯€
- âœ… æ›´æ–° Sticky Footer ç¯„ä¾‹
- âœ… æ“´å……å¿«é€Ÿæª¢æŸ¥æ¸…å–®

### references/neticrm-guidelines.md
- âœ… é‡å¯«ã€Œå…¨åŸŸå…ƒç´ ã€è¦ç¯„
- âœ… åŠ å…¥ `:has()` ä½¿ç”¨èªªæ˜
- âœ… ä¿®æ­£ CSS Variables ä½ç½®
- âœ… æ›´æ–°æª¢æŸ¥æ¸…å–®

### test-civicrm-good.css
- âœ… ä¿®æ­£ body ç‚º `body:has(.crm-container)`
- âœ… ä¿®æ­£ :root ç‚º `.crm-container`
- âœ… ç§»é™¤ä¸ç¢ºå®šçš„ `.crm-header-wrapper`

### NETICRM-QUICKREF.md
- âœ… æ›´æ–°ä¾‹å¤–èªªæ˜
- âœ… å¼·èª¿ `:has()` ä½¿ç”¨

### scripts/check_css_quality.py
- âœ… æ–°å¢ `_check_body_html_usage()` æ–¹æ³•
- âœ… æ–°å¢ `_check_root_usage()` æ–¹æ³•
- âœ… æ›´æ–°å…è¨±ä¾‹å¤–æ¸…å–®

## ğŸ¯ æ–°å¢æª¢æŸ¥åŠŸèƒ½

æª¢æŸ¥è…³æœ¬ç¾åœ¨æœƒè‡ªå‹•æª¢æ¸¬ï¼š

1. **body/html é¸æ“‡å™¨**
   ```
   âŒ éŒ¯èª¤: body { }
   âœ… å»ºè­°: body:has(.crm-container) { } æˆ–åœ¨ .crm-container å…§è¨­å®š
   ```

2. **:root ä¸­çš„ --crm- è®Šæ•¸**
   ```
   âš ï¸ è­¦å‘Š: :root { --crm-color-primary: #0073aa; }
   âœ… å»ºè­°: ç§»åˆ° .crm-container { } ä¸­
   ```

3. **.crm-container å‰ç¶´**
   ```
   âŒ éŒ¯èª¤: .crm-actions-ribbon { }
   âœ… å»ºè­°: .crm-container .crm-actions-ribbon { }
   ```

## ğŸ§ª æ¸¬è©¦çµæœ

### æ¸¬è©¦æª”æ¡ˆï¼štest-civicrm-body-html.css

åŒ…å«å„ç¨® body/html/:root çš„éŒ¯èª¤å’Œæ­£ç¢ºå¯«æ³•ã€‚

**æª¢æ¸¬çµæœ**:
- âœ… æ­£ç¢ºæª¢æ¸¬å‡º body æ²’æœ‰ä½¿ç”¨ `:has()`
- âœ… æ­£ç¢ºæª¢æ¸¬å‡º html æ²’æœ‰ä½¿ç”¨ `:has()`
- âœ… æ­£ç¢ºæª¢æ¸¬å‡º :root å®šç¾©äº† --crm- è®Šæ•¸
- âœ… æ­£ç¢ºå…è¨± `body:has(.crm-container)`
- âœ… æ­£ç¢ºå…è¨± `.crm-container { --crm-*: ... }`

## ğŸ“š æ ¸å¿ƒåŸå‰‡ç¸½çµ

### Rule #1: éš”é›¢æ€§å„ªå…ˆ
æ‰€æœ‰æ¨£å¼éƒ½å¿…é ˆéš”é›¢åœ¨ `.crm-container` å…§ï¼Œ**ä¸èƒ½æ±¡æŸ“å®¿ä¸»ç¶²ç«™**ã€‚

### Rule #2: ä½¿ç”¨ :has() è™•ç†å…¨åŸŸå…ƒç´ 
å°æ–¼ body/html ç­‰å…¨åŸŸå…ƒç´ ï¼Œ**å¿…é ˆ**ä½¿ç”¨ `:has(.crm-container)` ç¢ºä¿åªå½±éŸ¿æœ‰ CRM çš„é é¢ã€‚

### Rule #3: CSS Variables åœ¨å®¹å™¨å…§
æ‰€æœ‰ `--crm-*` è®Šæ•¸æ‡‰è©²å®šç¾©åœ¨ `.crm-container` å…§ï¼Œ**ä¸è¦**ä½¿ç”¨ `:root`ã€‚

### Rule #4: ä¸ç¢ºå®šå°±åŠ å‰ç¶´
å¦‚æœä¸ç¢ºå®šå…ƒç´ æ˜¯å¦åœ¨å®¹å™¨å…§ï¼Œ**ä¸€å¾‹åŠ ä¸Š `.crm-container` å‰ç¶´**ã€‚

## ğŸ” å¦‚ä½•é©—è­‰

### æ–¹æ³• 1: æª¢æŸ¥ HTML çµæ§‹
```html
<!-- æŸ¥çœ‹å¯¦éš›çš„ HTML çµæ§‹ -->
<body>
  <div id="civicrm-menu">...</div>  <!-- åœ¨ container å¤– -->
  <div class="crm-container">
    <div class="crm-actions-ribbon">...</div>  <!-- åœ¨ container å…§ -->
  </div>
</body>
```

### æ–¹æ³• 2: ä½¿ç”¨é–‹ç™¼è€…å·¥å…·
1. é–‹å•Ÿç€è¦½å™¨ DevTools
2. æª¢æŸ¥å…ƒç´ çš„çˆ¶å±¤çµæ§‹
3. ç¢ºèªæ˜¯å¦åœ¨ `.crm-container` å…§

### æ–¹æ³• 3: ä½¿ç”¨è‡ªå‹•åŒ–å·¥å…·
```bash
python check_css_quality.py your-file.css --civicrm
```

## ğŸ’¡ å¯¦éš›ç¯„ä¾‹å°ç…§

### ç¯„ä¾‹ 1: è¨­å®šå­—é«”

```css
/* âŒ éŒ¯èª¤ - å½±éŸ¿æ•´å€‹ç¶²ç«™ */
body {
  font-family: sans-serif;
}

/* âœ… æ­£ç¢º - åªå½±éŸ¿ CRM é é¢ */
body:has(.crm-container) {
  font-family: sans-serif;
}
```

### ç¯„ä¾‹ 2: å®šç¾©è®Šæ•¸

```css
/* âŒ éŒ¯èª¤ - æ±¡æŸ“å…¨åŸŸ */
:root {
  --crm-primary: blue;
}

/* âœ… æ­£ç¢º - éš”é›¢åœ¨å®¹å™¨å…§ */
.crm-container {
  --crm-primary: blue;
}
```

### ç¯„ä¾‹ 3: æŒ‰éˆ•æ¨£å¼

```css
/* âŒ éŒ¯èª¤ - ç¼ºå°‘å‰ç¶´ */
.crm-button {
  padding: 0.5rem 1rem;
}

/* âœ… æ­£ç¢º - åŠ ä¸Šå‰ç¶´ */
.crm-container .crm-button {
  padding: 0.5rem 1rem;
}
```

## ğŸ“ å­¸ç¿’é‡é»

é€™æ¬¡ä¿®æ­£è®“æˆ‘å€‘ç†è§£åˆ°ï¼š

1. **CiviCRM çš„åµŒå…¥ç‰¹æ€§**æ±ºå®šäº†å¿…é ˆåš´æ ¼éš”é›¢æ¨£å¼
2. **:has() é¸æ“‡å™¨**æ˜¯è™•ç†å…¨åŸŸå…ƒç´ çš„é—œéµ
3. **ä¸èƒ½å‡è¨­**å…ƒç´ çš„ä½ç½®ï¼Œå¿…é ˆå¯¦éš›æª¢æŸ¥
4. **è‡ªå‹•åŒ–å·¥å…·**å¯ä»¥å¹«åŠ©ç¢ºä¿è¦ç¯„çš„éµå®ˆ

---

**æ„Ÿè¬æŒ‡æ­£ï¼** é€™äº›ä¿®æ­£è®“ skill æ›´ç¬¦åˆ netiCRM å°ˆæ¡ˆçš„å¯¦éš›éœ€æ±‚ã€‚
